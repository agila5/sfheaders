---
output: github_document
---

```{r setup, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#",
  fig.path = "man/figures/README-",
  out.width = "100%"
)

library(sfheaders)
```
# sfheaders


## Another spatial library?

Yep. In a few of my other libraries I've made use of `sf` objects, but without importing the `sf` library itself. This is by design because `sf` is quite a 'heavy' library. 

Therefore I've written / copied these methods for constructing the `sf` objects across a few different libraries. 

So I thought it would be useful to have these in one place. And here they are (or will be, when it's finished).



## Can I use these methods too?

Yep

TODO: how to use.


### sfg

#### from R

```{r}

df <- data.frame(
  x = 1:5
  , y = 5:1
)

to_polygon( df )
```

#### from C++

there are various overloaded functions for each `sfg` type

- `sfheaders::sfg::to_point()`
- `sfheaders::sfg::to_multipoint()`
- `sfheaders::sfg::to_linestring()`
- `sfheaders::sfg::to_multilinestring()`
- `sfheaders::sfg::to_polygon()`
- `sfheaders::sfg::to_multipolygon()`

```{r}
library(Rcpp)
library(sf) ## for print

cppFunction(
  includes = '
    #include "sfheaders/sfg/sfg.hpp"
  ',
  code = '
    SEXP a_polygon( Rcpp::DataFrame df ) {
      return sfheaders::sfg::to_polygon( df );
    }
  ',
  depends = "sfheaders"
)

a_polygon( df )
```

```{r}
cppFunction(
  includes = '
    #include "sfheaders/sfg/sfg.hpp"
  ',
  code = '
    SEXP a_polygon( Rcpp::DataFrame df, Rcpp::StringVector geometry_columns ) {
      return sfheaders::sfg::to_polygon( df, geometry_columns );
    }
  ',
  depends = "sfheaders"
)

a_polygon( df, c("x","y") )

a_polygon( df, c("y", "x") )

```

```{r}
cppFunction(
  includes = '
    #include "sfheaders/sfg/sfg.hpp"
  ',
  code = '
    SEXP a_polygon( SEXP x, SEXP geometry_columns ) {
      return sfheaders::sfg::to_polygon( x, geometry_columns );
    }
  ',
  depends = "sfheaders"
)

a_polygon( df, c("x","y") )

a_polygon( df, c("y", "x") )

```


```{r}

cppFunction(
  includes = '
    #include "sfheaders/sfg/sfg.hpp"
  ',
  code = '
    SEXP a_polygon( SEXP df, std::string geom_type ) {
      return sfheaders::sfg::to_sfg( df, geom_type );
    }
  ',
  depends = "sfheaders"
)

a_polygon( df, "POLYGON" )

```


### sfc

```{r}
to_points( matrix(c(0,1,2,3,4,5), ncol = 2 ) )

```
