---
title: "Rcpp"
author: "David Cooley"
date: "`r Sys.Date()`"
output: 
    html_document:
        toc: true
        toc_float: true
        number_sections: false
        theme: flatly
header-includes: 
    - \usepackage{tikz}
    - \usetikzlibrary{arrows}
vignette: >
  %\VignetteIndexEntry{Rcpp}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}

---

```{r setup, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "# ",
  eval = T
)
```

```{r packages, include = TRUE}
library(Rcpp)
library(sfheaders)
library(sf)
```



### POINT

```{r}

cppFunction(
  includes = '
    #include "sfheaders/sfg/sfg.hpp"
  ',
  code = '
    SEXP a_point( SEXP x ) {
      return sfheaders::sfg::sfg_point( x );
    }
  ',
  depends = "sfheaders"
)

## vector
a_point( c(1,2) )
## single-row matrix
a_point( matrix(c(1,2), ncol = 2) )
## single-row data.frame
a_point( data.frame(x =1, y = 2) )
```


### MULTIPOINT

```{r}

cppFunction(
  includes = '
    #include "sfheaders/sfg/sfg.hpp"
  ',
  code = '
    SEXP a_multipoint( SEXP x ) {
      return sfheaders::sfg::sfg_multipoint( x );
    }
  ',
  depends = "sfheaders"
)

x <- 1:2
a_multipoint( x )

x <- matrix(c(1,2,3,4,5,6), ncol = 2)
a_multipoint( x )

x <- data.frame(x = 1:3, y = 4:6)
a_multipoint( x )
```

### LINESTRING

```{r}

cppFunction(
  includes = '
    #include "sfheaders/sfg/sfg.hpp"
  ',
  code = '
    SEXP a_linestring( SEXP x ) {
      return sfheaders::sfg::sfg_linestring( x );
    }
  ',
  depends = "sfheaders"
)

x <- 1:2
a_linestring( x )

x <- matrix(c(1,2,3,4,5,6), ncol = 2)
a_linestring( x )

x <- data.frame(x = 1:3, y = 4:6)
a_linestring( x )

x <- data.frame(x = 1:3, y = 4:6, z = 7:9)
a_linestring( x )

```


### MULTILINESTRING


```{r}

cppFunction(
  includes = '
    #include "sfheaders/sfg/sfg.hpp"
  ',
  code = '
    SEXP a_multilinestring( SEXP x ) {
      return sfheaders::sfg::sfg_multilinestring( x );
    }
  ',
  depends = "sfheaders"
)

x <- 1:2
a_multilinestring( x )

x <- matrix(c(1,2,3,4,5,6), ncol = 2)
a_multilinestring( x )

x <- data.frame(x = 1:3, y = 4:6)
a_multilinestring( x )

x <- data.frame(x = 1:3, y = 4:6, z = 7:9)
a_multilinestring( x )
```


```{r}

cppFunction(
  includes = '
    #include "sfheaders/sfg/sfg.hpp"
  ',
  code = '
    SEXP a_multilinestring( SEXP x, SEXP geometry_cols, SEXP id_col ) {
      return sfheaders::sfg::sfg_multilinestring( x, geometry_cols, id_col );
    }
  ',
  depends = "sfheaders"
)

x <- data.frame(id = c(1,1,2), x = 1:3, y = 4:6, z = 7:9)
a_multilinestring( x, c("x","y"), "id" )

a_multilinestring( x, c("x","y","z"), "id" )

a_multilinestring( x, NULL, "id" )


```

### POLYGON


### MULTIPOLIYGON






